# yaml-language-server: $schema=https://raw.githubusercontent.com/ScriptonBasestar/hip/refs/heads/master/schema.json
#
# Example: Basic env_file Usage
# Use Case: Separate secrets from configuration
# Features: Simple .env file loading, git-ignored secrets
#
# Setup:
#   1. Copy this to hip.yml
#   2. Create .env file with secrets (don't commit!)
#   3. Run: hip rails console
#
# Learn more: https://github.com/ScriptonBasestar/hip

version: '9.0.0'

# Load environment variables from .env file
# .env file should be git-ignored
env_file: .env

# Public configuration (committed to git)
environment:
  RAILS_ENV: development
  DATABASE_HOST: postgres
  DATABASE_PORT: 5432

compose:
  files:
    - docker-compose.yml

interaction:
  rails:
    description: Run Rails commands
    service: web
    command: bundle exec rails

  shell:
    description: Open bash shell
    service: web
    command: bash

provision:
  default:
    - hip rails db:create
    - hip rails db:migrate
    - hip rails db:seed

# Example .env file (create this, don't commit):
# ---------------------------------------------------
# # .env - Put this in .gitignore!
# DATABASE_PASSWORD=super_secret_password
# SECRET_KEY_BASE=long_random_string_here
# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=secret...
# ---------------------------------------------------
#
# Priority: System ENV > environment: > env_file
# This means:
#   - env_file loaded first
#   - environment: can override env_file values
#   - System ENV variables override everything
