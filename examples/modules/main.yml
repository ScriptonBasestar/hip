# yaml-language-server: $schema=https://raw.githubusercontent.com/ScriptonBasestar/hip/refs/heads/master/schema.json
#
# Example: Modular Hip Configuration with Modules
# Use Case: Large projects with shared configurations across teams
# Features: Module system for reusable command sets
#
# This example demonstrates how to split your hip configuration into modules.
# Modules allow you to:
# - Share common commands across multiple projects
# - Organize large configurations
# - Enable/disable feature sets easily
# - Maintain team-specific tooling separately
#
# Usage:
#   hip rails console          # From main config
#   hip rubocop                # From sast module
#   hip rspec                  # From testing module
#
# Learn more: https://github.com/ScriptonBasestar/hip

version: '9.0.0'

environment:
  RAILS_ENV: development

compose:
  files:
    - docker-compose.yml

# Import modules from .hip/ directory
modules:
  - sast      # Static analysis security testing tools
  - testing   # Testing frameworks and tools

# Main application commands
interaction:
  shell:
    description: Start a shell in the web container
    service: web
    command: /bin/bash

  rails:
    description: Run Rails commands
    service: web
    command: bundle exec rails
    subcommands:
      console:
        description: Start Rails console
        command: console
      server:
        description: Start Rails server
        command: server -b 0.0.0.0

  bundle:
    description: Run bundle commands
    service: web
    command: bundle

provision:
  # Note: Run 'hip up' first to start containers
  default:
    - hip bundle install
    - hip rails db:create db:migrate db:seed
